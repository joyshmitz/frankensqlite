{"id":"bd-1is","title":"Implement Compatibility-mode write-set spill + coordinator-only WAL append","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-07T22:02:31.246298789Z","created_by":"ubuntu","updated_at":"2026-02-07T22:04:26.368776012Z","closed_at":"2026-02-07T22:04:26.368755193Z","close_reason":"Obsolete: planning-phase spec updated; implementation work will be re-triaged later","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-24q","title":"Spec Evolution Viz: Next UX/Feature Pass","description":"Follow-up work to make the spec-evolution visualization more powerful, intuitive, and shareable (desktop + mobile), while keeping everything static-site deployable (Cloudflare Pages) and offline-friendly.","status":"open","priority":3,"issue_type":"epic","created_at":"2026-02-08T00:25:13.107582087Z","created_by":"ubuntu","updated_at":"2026-02-08T00:25:13.107582087Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["spec","viz"]}
{"id":"bd-24q.1","title":"Viz: Compare Two Arbitrary Commits (A/B)","description":"Goal\n- Add a compare mode where users pick two commits (A and B) and see:\n  - Rendered diff between reconstructed spec snapshots (Diff2Html)\n  - A/B metrics (Δlines, Δtokens, Δlev)\n  - A/B rendered markdown views (will be extended by side-by-side bead)\n\nUX (Desktop)\n- Fast commit picking with typeahead (subject/hash/time).\n- Clear A vs B affordances; swap button; \"reset to current\".\n\nUX (Mobile)\n- Full-screen picker sheet with large results and 1-tap select; keeps last-used commits pinned.\n\nImplementation Notes\n- Reuse snapshot reconstruction + patch application paths; avoid recompute via caching.\n- Persist A/B selection in URL (depends on permalinks).\n\nAcceptance Criteria\n- Any two commits can be compared; diff renders; metrics compute; UI remains responsive.\n\nTesting\n- Unit tests for snapshot reconstruction for arbitrary indices + diff generation.\n- E2E tests (desktop+mobile): pick A/B, swap, open diff, verify doc updates.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:25:28.770260989Z","created_by":"ubuntu","updated_at":"2026-02-08T00:51:35.663133899Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.1","depends_on_id":"bd-24q","type":"parent-child","created_at":"2026-02-08T00:25:28.770260989Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.1.1","title":"A/B Compare: Commit Picker UI + Swap + State","description":"Implement A/B selection UX:\n- Typeahead picker for commits (subject/hash/time), with keyboard nav on desktop and sheet on mobile.\n- Swap A<->B button; \"set A=current\" / \"set B=current\" shortcuts.\n- Persist selection in internal state; integrate with URL permalinks.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:51:45.895247814Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:26.077399610Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.1.1","depends_on_id":"bd-24q.1","type":"parent-child","created_at":"2026-02-08T00:51:45.895247814Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.1.1","depends_on_id":"bd-24q.3.2","type":"blocks","created_at":"2026-02-08T00:58:26.077351850Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.1.2","title":"A/B Compare: Snapshot Reconstruction for Arbitrary Commits","description":"Reconstruct full markdown snapshots for commit A and B:\n- Apply patches from base_doc to target commit index efficiently (reuse incremental cache; avoid O(N) per jump).\n- Support far jumps (early->late) without freezing UI; show progress.\n- Provide an API: getSnapshot(commitIdx) -> {text, renderedHtml?, outline?} used by diff and side-by-side view.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:51:51.638722104Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:26.161772095Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.1.2","depends_on_id":"bd-24q.1","type":"parent-child","created_at":"2026-02-08T00:51:51.638722104Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.1.2","depends_on_id":"bd-24q.5.1","type":"blocks","created_at":"2026-02-08T00:58:26.161730628Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.1.3","title":"A/B Compare: Render Diff Between Snapshots (Diff2Html)","description":"Compute and render the A->B diff:\n- Generate a unified diff between snapshot texts (A,B) and render via Diff2Html with a polished theme.\n- Large diffs: chunk or virtualize the diff view to keep UI responsive.\n- Provide toggles: unified vs split diff; collapse unchanged sections; search within diff.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:52:01.791695823Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:26.247048570Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.1.3","depends_on_id":"bd-24q.1","type":"parent-child","created_at":"2026-02-08T00:52:01.791695823Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.1.3","depends_on_id":"bd-24q.1.2","type":"blocks","created_at":"2026-02-08T00:58:26.247008235Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.1.4","title":"A/B Compare: Metrics (Δlines/Δtokens/Δlev)","description":"Compute A/B comparison metrics:\n- Δlines: add/del counts; Δtokens: fast tokenizer-based approximation; Δlev: WASM levenshtein on patch chunks or whole text.\n- Present metrics as chips + small sparklines; integrate into outlier/phase tools later.\n- Performance: compute in worker; cache by (dataset hash, A idx, B idx).\n- Provide an \"evidence\" panel: top changed sections + bucket mix (reuses section summary bead).","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:52:10.272830058Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:26.332730523Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.1.4","depends_on_id":"bd-24q.1","type":"parent-child","created_at":"2026-02-08T00:52:10.272830058Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.1.4","depends_on_id":"bd-24q.1.2","type":"blocks","created_at":"2026-02-08T00:58:26.332643230Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.1.5","title":"A/B Compare: Unit Tests (Snapshot + Diff + Metrics)","description":"Unit tests:\n- Snapshot reconstruction for arbitrary indices (including far jumps) matches reference reconstruction.\n- Diff generation between two texts is stable and deterministic.\n- Metrics: Δlines and Δtokens match reference counts; Δlev matches WASM reference for small cases.\n\nDiagnostics\n- On failure: print A/B ids, small excerpt around first mismatch, and metric evidence.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:52:18.167374704Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:26.596722315Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.1.5","depends_on_id":"bd-24q.1","type":"parent-child","created_at":"2026-02-08T00:52:18.167374704Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.1.5","depends_on_id":"bd-24q.1.2","type":"blocks","created_at":"2026-02-08T00:58:26.423869015Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.1.5","depends_on_id":"bd-24q.1.3","type":"blocks","created_at":"2026-02-08T00:58:26.508850048Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.1.5","depends_on_id":"bd-24q.1.4","type":"blocks","created_at":"2026-02-08T00:58:26.596676329Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.1.6","title":"A/B Compare: E2E Tests (Pick A/B + Swap + Views)","description":"E2E scenarios (desktop + mobile):\n- Pick A and B; verify doc/diff updates; swap; verify swap persists.\n- Toggle between diff and rendered views; ensure no crashes on large diffs.\n- Permalink round-trip restores A/B selection and active tab.\n\nDiagnostics\n- Log chosen A/B hashes, active tab, and any console warnings/errors.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:52:23.387467325Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:26.773843663Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.1.6","depends_on_id":"bd-24q.1","type":"parent-child","created_at":"2026-02-08T00:52:23.387467325Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.1.6","depends_on_id":"bd-24q.1.1","type":"blocks","created_at":"2026-02-08T00:58:26.686538456Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.1.6","depends_on_id":"bd-24q.1.3","type":"blocks","created_at":"2026-02-08T00:58:26.773800933Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.10","title":"Viz: Outlier Dashboard (Largest Deltas + Chart Annotations)","description":"Goal\n- Make the most important moments obvious: a dashboard that surfaces commits (or time bins) with the largest changes (Δlines/Δtokens/Δlev, bucket-weighted), and annotates those points directly on the charts.\n\nUX (Desktop)\n- Outlier panel: Top-N list with metric selector and filters (bucket, time resolution, day/hour/15m/5m).\n- Clicking an outlier jumps timeline + opens doc/diff at that commit; chart point pulses subtly.\n\nUX (Mobile)\n- Compact list inside sheet; tap-to-jump with a back affordance.\n\nImplementation Notes\n- Outlier scoring should be explainable and robust (median/MAD z-score preferred over mean/stddev).\n- Support both per-commit and aggregated-bin outliers (wall-clock bins).\n- Persist selection in URL state for sharing.\n\nAcceptance Criteria\n- Users can find \"big changes\" in under 5 seconds and jump to them reliably.\n\nTesting\n- Unit tests for robust outlier scoring + tie-breaking.\n- E2E: select metric, open outlier, verify commit idx/hash + chart marker.","status":"open","priority":3,"issue_type":"task","created_at":"2026-02-08T00:46:43.289289853Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:30.662941276Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.10","depends_on_id":"bd-24q","type":"parent-child","created_at":"2026-02-08T00:46:43.289289853Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.10","depends_on_id":"bd-24q.5","type":"blocks","created_at":"2026-02-08T00:58:30.662895600Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.10.1","title":"Outliers: Compute Robust Scores (MAD Z) + Top-K","description":"Implement explainable outlier detection:\n- For each metric series (lines/tokens/lev and bucket-weighted variants), compute robust center/scale (median + MAD).\n- Compute robust z-scores; rank top-K with stable tie-breaking (timestamp then hash).\n- Support both per-commit series and aggregated time-bin series.\n- Export an \"evidence\" object per outlier: value, median, MAD, z, and contributing buckets.","status":"open","priority":3,"issue_type":"task","created_at":"2026-02-08T00:46:48.064941115Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:30.747581041Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.10.1","depends_on_id":"bd-24q.10","type":"parent-child","created_at":"2026-02-08T00:46:48.064941115Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.10.1","depends_on_id":"bd-24q.5.1","type":"blocks","created_at":"2026-02-08T00:58:30.747532480Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.10.2","title":"Outliers: UI Panel + Chart Point Annotations","description":"Build the outlier UX:\n- Panel: metric dropdown, Top-N selector, filters (buckets, time resolution), and a clear \"why this is an outlier\" evidence drawer.\n- Charts: annotate outlier points (small markers) + hover tooltip; clicking marker selects corresponding list item and jumps commit.\n- Mobile: panel inside sheet; chart annotation remains visible but not cluttered.","status":"open","priority":3,"issue_type":"task","created_at":"2026-02-08T00:46:52.305096768Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:30.833532497Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.10.2","depends_on_id":"bd-24q.10","type":"parent-child","created_at":"2026-02-08T00:46:52.305096768Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.10.2","depends_on_id":"bd-24q.10.1","type":"blocks","created_at":"2026-02-08T00:58:30.833465953Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.10.3","title":"Outliers: Unit Tests (Robust Scoring + Evidence)","description":"Unit tests:\n- MAD z-score correctness on synthetic series with known median/MAD.\n- Edge cases: MAD=0, short series, NaNs, identical points.\n- Evidence object: ensure it includes value/median/MAD/z and sums for bucket-weighted series.\n\nDiagnostics\n- On failure, print the series, computed stats, and top-K list.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:46:58.250699350Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:30.919367206Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.10.3","depends_on_id":"bd-24q.10","type":"parent-child","created_at":"2026-02-08T00:46:58.250699350Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.10.3","depends_on_id":"bd-24q.10.1","type":"blocks","created_at":"2026-02-08T00:58:30.919324636Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.10.4","title":"Outliers: E2E Tests (Panel + Chart Marker Jump)","description":"E2E scenarios:\n- Select metric (lev), set Top-N=5, click #1 outlier -> commit selection changes and charts show marker.\n- Click marker on chart -> outlier list selection changes and doc/diff updates.\n\nDiagnostics\n- Log chosen metric, outlier ids/hashes, and whether chart marker series is present.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:47:03.281285435Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:31.007899797Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.10.4","depends_on_id":"bd-24q.10","type":"parent-child","created_at":"2026-02-08T00:47:03.281285435Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.10.4","depends_on_id":"bd-24q.10.2","type":"blocks","created_at":"2026-02-08T00:58:31.007856476Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.11","title":"Viz: Phase Map Overlay (Change Points + Regime Segments)","description":"Goal\n- Turn the evolution into readable \"phases\": detect change points in the metric series (lev/tokens/lines and/or bucket-weighted), then overlay regime segments directly on the charts and timeline dock.\n\nUX (Desktop)\n- Toggle \"Phase overlay\": charts show softly tinted phase bands + labels (Phase 1..N). Hover shows segment stats (duration, mean, variance, top buckets).\n- Clicking a phase band filters commit list + section summary to that segment.\n\nUX (Mobile)\n- Phase bands visible but subtle; phase details appear in a bottom sheet on tap.\n\nImplementation Notes (Alien-Artifact Leaning)\n- Use principled change-point detection (BOCPD with explicit hazard + likelihood model) and expose an evidence ledger per detected change (posterior mass / score).\n- Prefer explainable segmentation over ad-hoc thresholds; allow selecting the driving metric.\n- Cache computed phases in worker/localStorage by dataset hash.\n\nAcceptance Criteria\n- Phases feel stable and useful (not flickery); user can understand what changed and when.\n\nTesting\n- Unit tests using synthetic piecewise-stationary sequences; assert detected change points within tolerance.\n- E2E tests: toggle phase overlay, tap a phase, verify filtering/jump behavior.","status":"open","priority":3,"issue_type":"task","created_at":"2026-02-08T00:47:16.914843010Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:31.879540380Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.11","depends_on_id":"bd-24q","type":"parent-child","created_at":"2026-02-08T00:47:16.914843010Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.11","depends_on_id":"bd-24q.12","type":"blocks","created_at":"2026-02-08T00:58:31.879476771Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.11","depends_on_id":"bd-24q.5","type":"blocks","created_at":"2026-02-08T00:58:31.791878306Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.11.1","title":"Phase Map: BOCPD Implementation + Evidence Ledger","description":"Implement / improve BOCPD in a way that's reliable and explainable:\n- Choose likelihood model(s): e.g., Gaussian for normalized series, Poisson for count-like series.\n- Explicit hazard function; expose \"sensitivity\" as an interpretable parameter.\n- Output: change points + segments with posterior mass / confidence.\n- Evidence ledger per change: top contributing metric movement, before/after means/vars, and any bucket-weight contribution if available.\n- Run in worker; cache by dataset hash + metric + sensitivity.","status":"open","priority":3,"issue_type":"task","created_at":"2026-02-08T00:47:24.789131094Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:31.969086455Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.11.1","depends_on_id":"bd-24q.11","type":"parent-child","created_at":"2026-02-08T00:47:24.789131094Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.11.1","depends_on_id":"bd-24q.5.1","type":"blocks","created_at":"2026-02-08T00:58:31.969028277Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.11.2","title":"Phase Map: Overlay Rendering + Phase Interactions","description":"Render phase segments into the main charts and timeline dock:\n- Subtle tinted bands behind the line/stack chart; labels that don't clutter.\n- Hover/tap reveals phase summary (duration, mean/var, top buckets).\n- Clicking a phase filters commit list + outlier panel + section summary to that segment; toggle to clear filter.\n- URL state stores selected phase id + metric used for segmentation.","status":"open","priority":3,"issue_type":"task","created_at":"2026-02-08T00:47:29.138788860Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:32.145812765Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.11.2","depends_on_id":"bd-24q.11","type":"parent-child","created_at":"2026-02-08T00:47:29.138788860Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.11.2","depends_on_id":"bd-24q.11.1","type":"blocks","created_at":"2026-02-08T00:58:32.058378727Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.11.2","depends_on_id":"bd-24q.12.1","type":"blocks","created_at":"2026-02-08T00:58:32.145761960Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.11.3","title":"Phase Map: Unit Tests (Synthetic Change-Point Sequences)","description":"Unit tests:\n- Synthetic piecewise-stationary sequences (2-5 segments) with controlled noise; assert change points detected within an index tolerance.\n- Edge cases: constant series, single spike, gradual drift.\n- Evidence ledger invariants: posterior/confidence in [0,1], segments cover all indices with no gaps/overlaps.\n\nDiagnostics\n- On failure, print the series, detected cps, and per-cp evidence summary.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:47:33.813419417Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:32.237719002Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.11.3","depends_on_id":"bd-24q.11","type":"parent-child","created_at":"2026-02-08T00:47:33.813419417Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.11.3","depends_on_id":"bd-24q.11.1","type":"blocks","created_at":"2026-02-08T00:58:32.237676032Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.11.4","title":"Phase Map: E2E Tests (Toggle + Phase Filter)","description":"E2E scenarios:\n- Toggle phase overlay on/off; ensure chart renders without errors.\n- Click/tap a phase band -> commit list and outlier list filter to that segment; clear filter restores full set.\n- URL round-trip: copy permalink with phase selected; reload -> same phase is selected.\n\nDiagnostics\n- Log metric used, phase id, segment boundaries, and filtered commit count.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:47:39.710706475Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:32.327854559Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.11.4","depends_on_id":"bd-24q.11","type":"parent-child","created_at":"2026-02-08T00:47:39.710706475Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.11.4","depends_on_id":"bd-24q.11.2","type":"blocks","created_at":"2026-02-08T00:58:32.327811399Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.12","title":"Viz: Commit-Time vs Wall-Clock Binning Toggle","description":"Goal\n- Let users view the same evolution in two time coordinate systems:\n  - Commit-time (index order): emphasizes sequence of edits.\n  - Wall-clock time bins (day/hour/15m/5m): emphasizes bursts and pauses.\n\nUX\n- A simple toggle (Commit-time | Wall-clock) near the resolution controls.\n- When wall-clock is on, bins that have 0 commits should still render (to show quiet periods).\n\nImplementation Notes\n- Requires reliable timestamp parsing for commits; define a single canonical timezone for binning (likely local or UTC, but must be explicit and consistent).\n- Aggregation functions must be well-defined for all metrics (sum for counts, mean/median for rates); document each.\n- Persist in URL state.\n\nAcceptance Criteria\n- Switching modes is instantaneous after first compute; charts and heat stripe update consistently.\n\nTesting\n- Unit tests for bin boundaries across DST and timezone offsets (use fixed ISO timestamps).\n- E2E: toggle mode and verify bin count / labels change deterministically.","status":"open","priority":3,"issue_type":"task","created_at":"2026-02-08T00:47:50.352051887Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:31.097972036Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.12","depends_on_id":"bd-24q","type":"parent-child","created_at":"2026-02-08T00:47:50.352051887Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.12","depends_on_id":"bd-24q.3","type":"blocks","created_at":"2026-02-08T00:58:31.097927643Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.12.1","title":"Binning: Wall-Clock Series Builder (Fill Empty Bins)","description":"Implement wall-clock binning:\n- Inputs: commit timestamps (ISO), selected bin size (day/hour/15m/5m), timezone mode (UTC vs local).\n- Output: dense bin array with explicit empty bins (0 commits) so quiet periods are visible.\n- Aggregate metrics per bin with defined semantics (sum, mean, median).\n- Ensure bin labeling is stable and readable.","status":"open","priority":3,"issue_type":"task","created_at":"2026-02-08T00:47:54.942854904Z","created_by":"ubuntu","updated_at":"2026-02-08T00:47:54.942854904Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.12.1","depends_on_id":"bd-24q.12","type":"parent-child","created_at":"2026-02-08T00:47:54.942854904Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.12.2","title":"Binning Toggle: UI + URL State + Chart Consistency","description":"Wire the binning mode toggle into the UX:\n- Toggle near resolution controls; tooltip explains the difference.\n- Ensure all charts (timeline, stacked buckets, donut, BOCPD/phase) read the same unified aggregation layer.\n- URL state: mode=commit|wall + timezone mode (utc|local).\n- Add a small \"bin info\" chip (bin size, bin count, empty bin count) for transparency.","status":"open","priority":3,"issue_type":"task","created_at":"2026-02-08T00:48:02.328884847Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:31.186751679Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.12.2","depends_on_id":"bd-24q.12","type":"parent-child","created_at":"2026-02-08T00:48:02.328884847Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.12.2","depends_on_id":"bd-24q.12.1","type":"blocks","created_at":"2026-02-08T00:58:31.186709731Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.12.3","title":"Binning: Unit Tests (Timezone/DST Boundaries)","description":"Unit tests:\n- Fixed ISO timestamps around DST transitions; assert correct bin assignment in UTC and in local mode.\n- Empty bins: ensure they're present and labeled correctly.\n- Aggregation semantics: sums/means/medians match reference calculations for a small dataset.\n\nDiagnostics\n- On failure: print timestamps, computed bin keys, and expected vs actual series.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:48:06.778931537Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:31.273233748Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.12.3","depends_on_id":"bd-24q.12","type":"parent-child","created_at":"2026-02-08T00:48:06.778931537Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.12.3","depends_on_id":"bd-24q.12.1","type":"blocks","created_at":"2026-02-08T00:58:31.273188734Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.12.4","title":"Binning: E2E Tests (Toggle + Bin Count Assertions)","description":"E2E scenarios:\n- Toggle commit-time -> wall-clock; assert chart x-axis labels change and bin count differs.\n- Toggle timezone mode (if exposed): ensure labels update deterministically.\n- URL round-trip: share link preserves mode and resolution.\n\nDiagnostics\n- Log mode, resolution, bin count, empty bin count, and first/last label.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:48:11.240114818Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:31.358288258Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.12.4","depends_on_id":"bd-24q.12","type":"parent-child","created_at":"2026-02-08T00:48:11.240114818Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.12.4","depends_on_id":"bd-24q.12.2","type":"blocks","created_at":"2026-02-08T00:58:31.358244827Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.13","title":"Viz: Heat Stripe Under Dock (Bucket Density Over Time)","description":"Goal\n- Add a compact \"heat stripe\" under the timeline dock that shows where changes are dense (and which buckets dominate) across the entire history. This makes it easy to spot bursts at a glance and jump there instantly.\n\nUX\n- The stripe spans the full width; each pixel/segment maps to a time bin; color encodes dominant bucket and intensity encodes total change mass.\n- Hover/tap shows tooltip (time range, commit count, top buckets). Click jumps the main selection to the densest commit in that bin.\n\nImplementation Notes\n- Compute per-bin totals + per-bucket contributions; choose a deterministic \"dominant bucket\" rule with tie-breaking.\n- Must stay readable in light mode; use subtle saturation, not neon.\n\nAcceptance Criteria\n- Stripe renders quickly; interaction is precise (no off-by-one bin selection).\n\nTesting\n- Unit tests for bin->pixel mapping and dominant-bucket selection.\n- E2E tests: click stripe segment -> selection changes; tooltip content present.","status":"open","priority":3,"issue_type":"task","created_at":"2026-02-08T00:48:22.702479383Z","created_by":"ubuntu","updated_at":"2026-02-08T00:48:22.702479383Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.13","depends_on_id":"bd-24q","type":"parent-child","created_at":"2026-02-08T00:48:22.702479383Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.13.1","title":"Heat Stripe: Compute Density + Dominant Bucket per Bin","description":"Compute stripe data:\n- For each bin, compute total change mass (configurable: lines/tokens/lev) and per-bucket contributions.\n- Choose dominant bucket with deterministic tie-breaking (highest contribution, then lowest bucket id).\n- Provide a mapping from bin -> \"representative commit\" (e.g., max delta commit) for jump behavior.\n- Cache by dataset hash + mode (commit vs wall) + resolution + metric.","status":"open","priority":3,"issue_type":"task","created_at":"2026-02-08T00:48:28.163099640Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:31.446849262Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.13.1","depends_on_id":"bd-24q.12.1","type":"blocks","created_at":"2026-02-08T00:58:31.446810801Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.13.1","depends_on_id":"bd-24q.13","type":"parent-child","created_at":"2026-02-08T00:48:28.163099640Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.13.2","title":"Heat Stripe: Dock UI Rendering + Tooltip + Click-to-Jump","description":"Render the stripe as a first-class dock element:\n- Canvas or SVG implementation; must be crisp on high-DPI.\n- Tooltip on hover/tap with time range, commit count, top buckets and intensity.\n- Click selects representative commit and updates all panels/charts.\n- Mobile: tap + hold shows tooltip; single tap jumps. Avoid accidental jumps while scrubbing.","status":"open","priority":3,"issue_type":"task","created_at":"2026-02-08T00:48:32.891360457Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:31.530373793Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.13.2","depends_on_id":"bd-24q.13","type":"parent-child","created_at":"2026-02-08T00:48:32.891360457Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.13.2","depends_on_id":"bd-24q.13.1","type":"blocks","created_at":"2026-02-08T00:58:31.530330201Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.13.3","title":"Heat Stripe: Unit Tests (Bin Mapping + Dominance)","description":"Unit tests:\n- Bin->pixel mapping: ensure first/last bins map to stripe bounds without gaps.\n- Dominant bucket selection: tie-breaking is deterministic; intensity scaling is monotone.\n- Representative commit selection per bin is stable.\n\nDiagnostics\n- Print bin summaries and selected mapping on failure.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:48:37.118670284Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:31.618481420Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.13.3","depends_on_id":"bd-24q.13","type":"parent-child","created_at":"2026-02-08T00:48:37.118670284Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.13.3","depends_on_id":"bd-24q.13.1","type":"blocks","created_at":"2026-02-08T00:58:31.618438910Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.13.4","title":"Heat Stripe: E2E Tests (Tooltip + Jump)","description":"E2E scenarios:\n- Hover/tap stripe -> tooltip appears with expected fields.\n- Click stripe segment -> commit idx changes and timeline selection reflects it.\n- Mobile: long-press shows tooltip; single tap jumps (verify no conflict with scrub gesture).\n\nDiagnostics\n- Log stripe segment index, inferred bin range, and selected representative commit hash.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:48:41.530343068Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:31.705146831Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.13.4","depends_on_id":"bd-24q.13","type":"parent-child","created_at":"2026-02-08T00:48:41.530343068Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.13.4","depends_on_id":"bd-24q.13.2","type":"blocks","created_at":"2026-02-08T00:58:31.705099062Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.14","title":"Viz: Commit Clustering by Similarity (MinHash + Themes)","description":"Goal\n- Group commits by similarity of their changes so users can see recurring \"themes\" (e.g., lots of scrivening, refactors, alien-math additions) and jump between similar edits quickly.\n\nUX (Desktop)\n- Cluster panel: list clusters with size + representative commit; clicking a cluster highlights its members on the timeline and filters the commit list.\n- Optional \"theme tags\" derived from dominant buckets / keywords in diffs.\n\nUX (Mobile)\n- Cluster list in a sheet; selecting highlights and offers \"next/prev in cluster\" navigation.\n\nImplementation Notes (Alien-Artifact Leaning)\n- Use MinHash signatures over token shingles of the unified diff (or added-lines-only) to approximate Jaccard similarity efficiently.\n- Run in WebWorker; cache signatures/clusters by dataset hash + params (shingle size, signature length, threshold).\n- Keep clustering deterministic (stable ordering) so permalinks remain meaningful.\n\nAcceptance Criteria\n- Clusters are stable and useful; selecting a cluster makes it easy to explore similar commits in a few clicks.\n\nTesting\n- Unit tests on synthetic diffs with known overlap; assert clustering groups correctly.\n- E2E: select cluster, verify timeline highlights and next/prev navigation works.","status":"open","priority":3,"issue_type":"task","created_at":"2026-02-08T00:48:58.584087667Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:32.506458208Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.14","depends_on_id":"bd-24q","type":"parent-child","created_at":"2026-02-08T00:48:58.584087667Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.14","depends_on_id":"bd-24q.3","type":"blocks","created_at":"2026-02-08T00:58:32.506418433Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.14","depends_on_id":"bd-24q.5","type":"blocks","created_at":"2026-02-08T00:58:32.416387572Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.14.1","title":"Clustering: Compute MinHash Signatures (Worker)","description":"Implement MinHash signature generation:\n- Token shingling on diff text (configurable: full diff vs added-lines-only; shingle size k).\n- Deterministic hash functions seeded from dataset hash so results are stable.\n- Signature length parameter (e.g., 64/128).\n- Store signatures compactly (Uint32Array) and persist in localStorage (base64 or JSON-safe encoding).\n- Provide progress + cancellation.","status":"open","priority":3,"issue_type":"task","created_at":"2026-02-08T00:49:04.282452496Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:32.597560011Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.14.1","depends_on_id":"bd-24q.14","type":"parent-child","created_at":"2026-02-08T00:49:04.282452496Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.14.1","depends_on_id":"bd-24q.5.1","type":"blocks","created_at":"2026-02-08T00:58:32.597480242Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.14.2","title":"Clustering: Deterministic Grouping (LSH/Threshold) + Theme Tags","description":"Cluster commits from MinHash signatures:\n- Similarity estimate: signature agreement ratio -> approx Jaccard.\n- Grouping strategy: deterministic threshold clustering (single-linkage) or LSH buckets; must be stable across runs.\n- Theme tags: derive lightweight labels using dominant buckets + top keywords from added-lines (explainable).\n- Output: clusters with stable IDs, representative commit (medoid), and member list.","status":"open","priority":3,"issue_type":"task","created_at":"2026-02-08T00:49:08.814823455Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:32.688984378Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.14.2","depends_on_id":"bd-24q.14","type":"parent-child","created_at":"2026-02-08T00:49:08.814823455Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.14.2","depends_on_id":"bd-24q.14.1","type":"blocks","created_at":"2026-02-08T00:58:32.688928914Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.14.3","title":"Clustering: UI Panel + Timeline Highlight + Next/Prev Navigation","description":"Build the clustering UX:\n- Cluster list with size, theme tags, and representative commit summary.\n- Selecting a cluster highlights members on timeline/heat stripe and filters commit list; next/prev in cluster navigation buttons.\n- URL state: selected cluster id and threshold params.\n- Mobile: cluster list in sheet, with clear \"next in cluster\" CTA.","status":"open","priority":3,"issue_type":"task","created_at":"2026-02-08T00:49:13.178659379Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:32.777113845Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.14.3","depends_on_id":"bd-24q.14","type":"parent-child","created_at":"2026-02-08T00:49:13.178659379Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.14.3","depends_on_id":"bd-24q.14.2","type":"blocks","created_at":"2026-02-08T00:58:32.777052521Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.14.4","title":"Clustering: Unit Tests (MinHash + Grouping Correctness)","description":"Unit tests:\n- MinHash: synthetic sets with known Jaccard; assert estimator error within tolerance for chosen signature length.\n- Determinism: same inputs produce same signatures/clusters (stable IDs).\n- Grouping: synthetic diffs that should cluster together / apart; verify member sets.\n\nDiagnostics\n- Print signatures (first few hashes), similarity matrix slice, and resulting clusters on failure.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:49:17.838077213Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:32.956940169Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.14.4","depends_on_id":"bd-24q.14","type":"parent-child","created_at":"2026-02-08T00:49:17.838077213Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.14.4","depends_on_id":"bd-24q.14.1","type":"blocks","created_at":"2026-02-08T00:58:32.865793642Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.14.4","depends_on_id":"bd-24q.14.2","type":"blocks","created_at":"2026-02-08T00:58:32.956872803Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.14.5","title":"Clustering: E2E Tests (Select Cluster + Next/Prev)","description":"E2E scenarios:\n- Open clustering panel; select top cluster -> timeline highlights appear and commit list filters.\n- Use next/prev in cluster navigation; ensure selected commit remains within cluster membership.\n- URL round-trip preserves selected cluster id + parameters.\n\nDiagnostics\n- Log selected cluster id, member count, and current commit hash after each navigation step.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:49:22.993879601Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:33.046212393Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.14.5","depends_on_id":"bd-24q.14","type":"parent-child","created_at":"2026-02-08T00:49:22.993879601Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.14.5","depends_on_id":"bd-24q.14.3","type":"blocks","created_at":"2026-02-08T00:58:33.046163642Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.15","title":"Viz: Side-by-Side Markdown Panes (A vs B) + Synced Scroll","description":"Goal\n- In A/B compare mode, add a side-by-side rendered markdown view (A on left, B on right) with synced scrolling and clear change cues. This is the fastest way to grok \"what changed\" while keeping the spec readable.\n\nUX (Desktop)\n- Two panes with a draggable divider; optional \"sync scroll\" toggle (on by default).\n- Sync by headings/anchors when possible; fallback to proportional scroll.\n- Hovering a heading path highlights the corresponding section in both panes.\n\nUX (Mobile)\n- Stacked/segmented control: A | B | Split (if landscape).\n- Sync via \"jump to same heading\" rather than continuous scroll.\n\nImplementation Notes\n- Reuse reconstructed snapshots from A/B compare; avoid double recompute.\n- Provide a robust mapping between A and B headings (by normalized heading text + path).\n\nAcceptance Criteria\n- Side-by-side mode is usable on large docs without jank.\n- Heading jumps land at consistent corresponding sections.\n\nTesting\n- Unit tests for heading matching + scroll sync mapping.\n- E2E: enable A/B, switch to side-by-side, scroll in A -> B follows; mobile A/B toggle works.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:49:34.505264248Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:26.858520918Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.15","depends_on_id":"bd-24q","type":"parent-child","created_at":"2026-02-08T00:49:34.505264248Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.15","depends_on_id":"bd-24q.1","type":"blocks","created_at":"2026-02-08T00:58:26.858462088Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.15.1","title":"Side-by-Side: Two-Pane Layout + Divider + Sync Toggle","description":"Implement the core layout:\n- Two scroll containers rendered concurrently; draggable divider; sync toggle; independent selection/highlighting.\n- Preserve typography quality and code highlighting in both panes.\n- Ensure virtualization isn't needed initially; keep perf acceptable via caching + worker.\n- Add a \"copy permalink\" that includes A/B commit selection + view mode.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:49:45.353023946Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:26.946647961Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.15.1","depends_on_id":"bd-24q.1.2","type":"blocks","created_at":"2026-02-08T00:58:26.946615931Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.15.1","depends_on_id":"bd-24q.15","type":"parent-child","created_at":"2026-02-08T00:49:45.353023946Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.15.2","title":"Side-by-Side: Heading Matching + Scroll Sync Algorithm","description":"Implement robust A<->B alignment:\n- Normalize headings (case, punctuation) and use heading \"path\" (parent headings) to disambiguate duplicates.\n- Scroll sync modes:\n  - Anchor mode: keep nearest heading aligned between panes.\n  - Proportional mode: fallback when anchor mapping missing.\n- UX: show a small \"linked\" indicator when anchor sync is active; allow temporarily breaking sync while user scrolls quickly.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:49:49.974828396Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:27.117578577Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.15.2","depends_on_id":"bd-24q.15","type":"parent-child","created_at":"2026-02-08T00:49:49.974828396Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.15.2","depends_on_id":"bd-24q.15.1","type":"blocks","created_at":"2026-02-08T00:58:27.030167783Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.15.2","depends_on_id":"bd-24q.8.1","type":"blocks","created_at":"2026-02-08T00:58:27.117535457Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.15.3","title":"Side-by-Side: Mobile UX (A/B Tabs + Split in Landscape)","description":"Implement mobile-specific behavior:\n- Default: segmented control A | B; preserve scroll position per pane.\n- Landscape: allow split view; in portrait, offer \"jump to same heading\" CTA when switching panes.\n- Ensure bottom dock does not overlap content; use safe-area insets.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:49:54.897246873Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:27.294394083Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.15.3","depends_on_id":"bd-24q.15","type":"parent-child","created_at":"2026-02-08T00:49:54.897246873Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.15.3","depends_on_id":"bd-24q.15.1","type":"blocks","created_at":"2026-02-08T00:58:27.206786541Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.15.3","depends_on_id":"bd-24q.15.2","type":"blocks","created_at":"2026-02-08T00:58:27.294350261Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.15.4","title":"Side-by-Side: Unit Tests (Heading Match + Scroll Sync)","description":"Unit tests:\n- Heading matching: duplicates, renamed headings, moved sections; assert best-effort mapping and stable tie-breaking.\n- Scroll sync: given outlines + scroll positions, assert target positions are monotone and do not oscillate.\n\nDiagnostics\n- Print mapped heading pairs and a few scroll sync steps on failure.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:49:59.400821583Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:27.380952214Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.15.4","depends_on_id":"bd-24q.15","type":"parent-child","created_at":"2026-02-08T00:49:59.400821583Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.15.4","depends_on_id":"bd-24q.15.2","type":"blocks","created_at":"2026-02-08T00:58:27.380913652Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.15.5","title":"Side-by-Side: E2E Tests (Split View + Sync + Mobile Tabs)","description":"E2E scenarios:\n- Desktop: enable A/B; open side-by-side; scroll left pane -> right follows; disable sync -> panes scroll independently.\n- Mobile: switch A->B tab preserves scroll positions; \"jump to same heading\" works.\n\nDiagnostics\n- Log scrollTop values in both panes during sync and after mode toggles.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:50:07.124353623Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:27.469695218Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.15.5","depends_on_id":"bd-24q.15","type":"parent-child","created_at":"2026-02-08T00:50:07.124353623Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.15.5","depends_on_id":"bd-24q.15.3","type":"blocks","created_at":"2026-02-08T00:58:27.469661565Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.16","title":"Viz: Inline Changed-Line Highlights in Rendered Markdown","description":"Goal\n- Let users read the spec as a document *and still see what changed* inline: highlight added/changed lines/blocks directly in the rendered markdown pane (not only in Diff2Html).\n\nUX (Desktop)\n- Toggle: \"Inline highlights\". Added lines get a subtle left bar + background; modified blocks get a faint outline; hovering shows the bucket mix + Δ metrics for that block.\n- Works with section summary and heading mini-map: changed headings show markers; clicking a marker scrolls to the next changed block.\n\nUX (Mobile)\n- Same toggle in sheet; changed blocks are navigable via \"Next change\" button (big tap target).\n\nImplementation Notes\n- Need a stable mapping from unified diff hunks to rendered DOM blocks. Likely approach: inject sentinel markers into the markdown before rendering (line/block wrappers), then post-process DOM to apply highlights and remove sentinels.\n- Must not break code highlighting or typography.\n\nAcceptance Criteria\n- Inline highlights are accurate enough to be trusted; toggling is instant.\n\nTesting\n- Unit tests for hunk->block mapping and highlight application (synthetic markdown + diffs).\n- E2E: toggle highlights, navigate next change, verify highlight present and stable across commit switches.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:50:26.951490454Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:33.225875822Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.16","depends_on_id":"bd-24q","type":"parent-child","created_at":"2026-02-08T00:50:26.951490454Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.16","depends_on_id":"bd-24q.5","type":"blocks","created_at":"2026-02-08T00:58:33.225830437Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.16","depends_on_id":"bd-24q.8","type":"blocks","created_at":"2026-02-08T00:58:33.134420007Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.16.1","title":"Inline Highlights: Hunk-to-DOM Mapping Strategy (Sentinels)","description":"Design + implement the mapping layer:\n- Decide unit of highlighting: source line, paragraph block, list item, or code fence line.\n- Approach: pre-process markdown to wrap candidate blocks/lines with sentinel markers that survive rendering, then locate those nodes in DOM to apply classes/styles.\n- Ensure the approach handles headings, lists, code fences, tables (if supported), and inline code.\n- Provide a \"mapping debug\" mode that can outline blocks and show their source ranges for troubleshooting.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:50:36.553768836Z","created_by":"ubuntu","updated_at":"2026-02-08T00:50:36.553768836Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.16.1","depends_on_id":"bd-24q.16","type":"parent-child","created_at":"2026-02-08T00:50:36.553768836Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.16.2","title":"Inline Highlights: Render Styles + Next/Prev Change Navigation","description":"Apply highlights and make them usable:\n- Styles: subtle left bar + background for added blocks; outline for modified; optional bucket-color accent.\n- Navigation: \"Next change\" / \"Prev change\" buttons; keyboard shortcuts on desktop; mobile big tap targets.\n- Hover/tap on a highlighted block opens a tiny evidence popover (Δlines/tokens/lev + buckets).\n- Must be stable across commit switches and when toggling between doc/diff views.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:50:43.557441538Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:33.314032130Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.16.2","depends_on_id":"bd-24q.16","type":"parent-child","created_at":"2026-02-08T00:50:43.557441538Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.16.2","depends_on_id":"bd-24q.16.1","type":"blocks","created_at":"2026-02-08T00:58:33.313977828Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.16.3","title":"Inline Highlights: Unit Tests (Mapping + Highlight Application)","description":"Unit tests:\n- Given synthetic markdown + diff hunks, assert the correct DOM blocks receive highlight classes.\n- Duplicates: multiple identical lines; ensure highlights map to correct region deterministically.\n- Code blocks: ensure syntax highlighting remains intact and highlights don't break code formatting.\n\nDiagnostics\n- On failure: dump the intermediate sentinel-marked markdown and a simplified DOM tree with highlighted nodes.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:50:48.907215789Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:33.399975552Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.16.3","depends_on_id":"bd-24q.16","type":"parent-child","created_at":"2026-02-08T00:50:48.907215789Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.16.3","depends_on_id":"bd-24q.16.1","type":"blocks","created_at":"2026-02-08T00:58:33.399927572Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.16.4","title":"Inline Highlights: E2E Tests (Toggle + Next Change + Stability)","description":"E2E scenarios:\n- Toggle inline highlights on; verify at least one highlighted block exists for a known commit with changes.\n- Use next/prev change navigation; assert scroll position changes and highlight remains visible.\n- Switch commit; highlights refresh correctly; no stale highlights remain.\n\nDiagnostics\n- Log commit idx/hash, highlight count, and current highlighted block id/path after each step.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:50:53.421054870Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:33.489290645Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.16.4","depends_on_id":"bd-24q.16","type":"parent-child","created_at":"2026-02-08T00:50:53.421054870Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.16.4","depends_on_id":"bd-24q.16.2","type":"blocks","created_at":"2026-02-08T00:58:33.489255199Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.2","title":"Viz: Heading Mini-Map + Changed-Section Highlighting","description":"Goal\n- Add a heading mini-map generated from the rendered markdown outline with per-heading change markers. This makes long-doc evolution navigable.\n\nUX (Desktop)\n- Left-side mini-map: collapsible tree of headings; per-heading \"changed\" dot/heat; click scrolls doc.\n- Optional \"follow along\" mode: highlight current section while scrolling.\n\nUX (Mobile)\n- Slide-over mini-map (from left) or sheet; large tap targets; shows changed dots.\n\nImplementation Notes\n- Reuse shared outline extraction (see section summary outline task).\n- Changed markers should come from section-level diff attribution (avoid duplicated logic).\n\nAcceptance Criteria\n- Users can jump to any heading reliably; changed headings are clearly indicated.\n\nTesting\n- Unit tests for outline generation + changed-marker computation.\n- E2E: open mini-map, click heading, verify scroll and highlight; mobile slide-over works.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:25:28.846093570Z","created_by":"ubuntu","updated_at":"2026-02-08T00:52:36.720405836Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.2","depends_on_id":"bd-24q","type":"parent-child","created_at":"2026-02-08T00:25:28.846093570Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.2.1","title":"Mini-Map: Integrate Shared Outline API","description":"Hook the heading mini-map to the shared outline extractor:\n- Consume getOutline(commitIdx) (from outline extraction task).\n- Ensure outline updates when commit changes and when A/B compare is active (choose the active doc pane).\n- Provide stable heading ids for scroll targets.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:52:42.758010135Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:27.556488168Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.2.1","depends_on_id":"bd-24q.2","type":"parent-child","created_at":"2026-02-08T00:52:42.758010135Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.2.1","depends_on_id":"bd-24q.8.1","type":"blocks","created_at":"2026-02-08T00:58:27.556440188Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.2.2","title":"Mini-Map: Desktop UI (Left Rail Tree + Follow Along)","description":"Build the desktop mini-map UI:\n- Collapsible left rail with heading tree; indentation shows levels; smooth hover/active states.\n- Follow-along mode: track current heading while scrolling and keep it visible in the mini-map.\n- Search within headings (optional) and jump.\n- A11y: keyboard navigation through headings.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:52:47.162025550Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:27.641217130Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.2.2","depends_on_id":"bd-24q.2","type":"parent-child","created_at":"2026-02-08T00:52:47.162025550Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.2.2","depends_on_id":"bd-24q.2.1","type":"blocks","created_at":"2026-02-08T00:58:27.641179840Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.2.3","title":"Mini-Map: Mobile UI (Slide-Over + Large Tap Targets)","description":"Build mobile mini-map UX:\n- Slide-over (from left) or sheet; open/close button in header; respects safe-area insets.\n- Large tap targets and clear changed markers.\n- Jump scrolls doc and closes overlay (optional \"stay open\" toggle).\n- Gesture conflict: avoid interfering with timeline scrub and doc scrolling.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:52:51.844457198Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:27.724583955Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.2.3","depends_on_id":"bd-24q.2","type":"parent-child","created_at":"2026-02-08T00:52:51.844457198Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.2.3","depends_on_id":"bd-24q.2.1","type":"blocks","created_at":"2026-02-08T00:58:27.724544812Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.2.4","title":"Mini-Map: Changed-Section Markers (Per Heading)","description":"Compute and render per-heading change markers:\n- For each heading, compute if it changed in current commit (and optionally magnitude using Δlev/Δtokens).\n- Use section summary attribution as the underlying data source (avoid separate hunk parsing here).\n- Visual encoding: dot for changed; intensity for magnitude; optional dominant-bucket accent.\n- Support A/B mode: markers show changes between A and B.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:52:57.734726755Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:27.810529050Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.2.4","depends_on_id":"bd-24q.2","type":"parent-child","created_at":"2026-02-08T00:52:57.734726755Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.2.4","depends_on_id":"bd-24q.8.2","type":"blocks","created_at":"2026-02-08T00:58:27.810473005Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.2.5","title":"Mini-Map: Unit Tests (Outline + Markers)","description":"Unit tests:\n- Outline consumption: stable IDs, duplicate headings.\n- Marker computation: changed vs unchanged headings, magnitude scaling, tie-breaking for dominant bucket.\n\nDiagnostics\n- Print outline + marker map for failing cases.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:53:05.300222442Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:27.894469598Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.2.5","depends_on_id":"bd-24q.2","type":"parent-child","created_at":"2026-02-08T00:53:05.300222442Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.2.5","depends_on_id":"bd-24q.2.4","type":"blocks","created_at":"2026-02-08T00:58:27.894425536Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.2.6","title":"Mini-Map: E2E Tests (Jump + Follow Along + Mobile Overlay)","description":"E2E scenarios:\n- Desktop: open mini-map, click a heading -> doc scrolls; follow-along highlights correct heading while scrolling.\n- Changed markers: for a known commit with changes, at least one marker is present and clicking it jumps to a changed section.\n- Mobile: open overlay, tap heading -> doc jumps; overlay closes; dock still usable.\n\nDiagnostics\n- Log chosen heading id/text, scrollTop before/after, and active marker count.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:53:10.693757684Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:28.149648427Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.2.6","depends_on_id":"bd-24q.2","type":"parent-child","created_at":"2026-02-08T00:53:10.693757684Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.2.6","depends_on_id":"bd-24q.2.2","type":"blocks","created_at":"2026-02-08T00:58:27.981133837Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.2.6","depends_on_id":"bd-24q.2.3","type":"blocks","created_at":"2026-02-08T00:58:28.065590420Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.2.6","depends_on_id":"bd-24q.2.4","type":"blocks","created_at":"2026-02-08T00:58:28.149607571Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.3","title":"Viz: Shareable Permalinks (URL State) + Copy Link","description":"Goal\n- Encode visualization state in the URL so any view is shareable and reloadable with zero server logic. Add a Copy Link button.\n\nState to Encode\n- Commit selection (single idx) and A/B selection (A idx, B idx).\n- Active tab/view (doc/diff/metrics), chart resolution, metric choice, bucket filters.\n- Feature flags: phase overlay, outlier panel selection, selected phase/cluster, inline highlights toggle, etc.\n\nImplementation Notes\n- Canonical schema in query params; stable key names; versioned for future migration.\n- Support back/forward navigation (history API) without causing re-render loops.\n\nAcceptance Criteria\n- Copying a link and opening it in a fresh tab reproduces the exact state.\n- Invalid/partial URLs degrade gracefully (fall back to defaults).\n\nTesting\n- Unit tests for encode/decode round-trips and migration.\n- E2E: set complex state, copy link, reload, assert same state.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:25:28.919682255Z","created_by":"ubuntu","updated_at":"2026-02-08T00:53:25.354837109Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.3","depends_on_id":"bd-24q","type":"parent-child","created_at":"2026-02-08T00:25:28.919682255Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.3.1","title":"Permalinks: URL State Schema (Versioned, Canonical)","description":"Define the URL schema:\n- Query param keys + allowed values; include a schema version (v=1).\n- Canonical ordering for stable copy/paste.\n- Rules for partial state (defaults) and invalid values (clamp).\n- Document the schema in the visualization (small \"share\" help popover).","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:53:32.530904053Z","created_by":"ubuntu","updated_at":"2026-02-08T00:53:32.530904053Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.3.1","depends_on_id":"bd-24q.3","type":"parent-child","created_at":"2026-02-08T00:53:32.530904053Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.3.2","title":"Permalinks: Encode/Decode + History API Integration","description":"Implement the permalink plumbing:\n- parseUrlState(location) -> partialState\n- encodeUrlState(state) -> query string\n- Apply URL state on load without double-render.\n- On state changes, update URL via replaceState (and pushState only for user-intentful actions).\n- Back/forward: listen to popstate and restore state.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:53:37.000602960Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:24.694082874Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.3.2","depends_on_id":"bd-24q.3","type":"parent-child","created_at":"2026-02-08T00:53:37.000602960Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.3.2","depends_on_id":"bd-24q.3.1","type":"blocks","created_at":"2026-02-08T00:58:24.694045454Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.3.3","title":"Permalinks: Copy Link Button + Share UX","description":"Build the sharing UX:\n- Copy Link button (with success toast) that copies the canonical URL with current state.\n- Optional \"Share state\" toggles (include/exclude heavy params like selected cluster) if needed.\n- Ensure the link is short-ish (avoid huge base64 in URL); prefer storing heavy stuff in localStorage keyed by dataset hash.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:53:41.710032713Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:24.781178449Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.3.3","depends_on_id":"bd-24q.3","type":"parent-child","created_at":"2026-02-08T00:53:41.710032713Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.3.3","depends_on_id":"bd-24q.3.2","type":"blocks","created_at":"2026-02-08T00:58:24.781138986Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.3.4","title":"Permalinks: Unit Tests (Encode/Decode + Canonicalization)","description":"Unit tests:\n- Round-trip encode(decode(url)) is stable (canonical ordering).\n- Invalid params clamp to defaults; partial params merge with defaults.\n- Schema versioning: v1 decode works; unknown v warns and falls back safely.\n\nDiagnostics\n- Print original URL, decoded state, and re-encoded URL on failure.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:53:46.072448291Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:24.953013626Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.3.4","depends_on_id":"bd-24q.3","type":"parent-child","created_at":"2026-02-08T00:53:46.072448291Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.3.4","depends_on_id":"bd-24q.3.1","type":"blocks","created_at":"2026-02-08T00:58:24.868659074Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.3.4","depends_on_id":"bd-24q.3.2","type":"blocks","created_at":"2026-02-08T00:58:24.952965616Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.3.5","title":"Permalinks: E2E Tests (Round-Trip Complex State)","description":"E2E scenarios:\n- Set a complex state: A/B selection, active tab, resolution, bucket filters, phase overlay, selected phase (if available).\n- Copy link, open in fresh context, assert state matches.\n- Back/forward: change commit via click, then go back and ensure selection restores.\n\nDiagnostics\n- Log the copied URL and a summarized state object before/after reload.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:53:53.673439595Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:25.039032409Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.3.5","depends_on_id":"bd-24q.3","type":"parent-child","created_at":"2026-02-08T00:53:53.673439595Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.3.5","depends_on_id":"bd-24q.3.3","type":"blocks","created_at":"2026-02-08T00:58:25.038993296Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.4","title":"Viz: Story Mode (Curated Milestones + Autoplay)","description":"Goal\n- Add an optional narrative layer: curated milestones (hand-picked commits) with short annotations and an autoplay/stepper flow so non-expert viewers can understand the evolution.\n\nUX (Desktop)\n- Right-side story rail with cards (milestone title, why it matters, key metrics).\n- Autoplay uses playback engine; story can pause at milestones; \"continue\" advances.\n\nUX (Mobile)\n- Full-screen swipeable cards; big next/prev; tapping a card jumps to commit and opens relevant view.\n\nImplementation Notes\n- Milestone data stored locally (no API) as a small JSON array embedded in the HTML.\n- Each milestone references commit hash and optional focus heading/section.\n- Story mode should be shareable via permalinks (story=1, milestone=n).\n\nAcceptance Criteria\n- Story mode works offline and feels polished; transitions are smooth; user never feels lost.\n\nTesting\n- Unit tests for milestone schema validation and navigation.\n- E2E tests: enter story mode, step through milestones, verify commit selection and annotations.","status":"open","priority":3,"issue_type":"task","created_at":"2026-02-08T00:25:28.993920674Z","created_by":"ubuntu","updated_at":"2026-02-08T00:54:01.414716885Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.4","depends_on_id":"bd-24q","type":"parent-child","created_at":"2026-02-08T00:25:28.993920674Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.4.1","title":"Story Mode: Milestone Schema + Curated Data Set","description":"Define the milestone model and create an initial curated set:\n- Schema: {id, title, commitHash, annotationMd, focusHeading?, defaultTab?, metricsHighlights?}.\n- Include guardrails: if commitHash not found, show warning and skip gracefully.\n- Keep the initial set small but high-signal (5-15 milestones).\n- Add a lightweight in-app editor later (out of scope for now).","status":"open","priority":3,"issue_type":"task","created_at":"2026-02-08T00:54:07.647586114Z","created_by":"ubuntu","updated_at":"2026-02-08T00:54:07.647586114Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.4.1","depends_on_id":"bd-24q.4","type":"parent-child","created_at":"2026-02-08T00:54:07.647586114Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.4.2","title":"Story Mode: Desktop UI (Right Rail Cards + Annotations)","description":"Build the desktop story UI:\n- Right rail with cards; current milestone highlighted; previous/next buttons; progress indicator.\n- Each card shows: title, annotation (rendered markdown), and key metric chips.\n- Clicking a card jumps to its commit and applies focusHeading/ defaultTab.","status":"open","priority":3,"issue_type":"task","created_at":"2026-02-08T00:54:13.831191471Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:28.234577714Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.4.2","depends_on_id":"bd-24q.4","type":"parent-child","created_at":"2026-02-08T00:54:13.831191471Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.4.2","depends_on_id":"bd-24q.4.1","type":"blocks","created_at":"2026-02-08T00:58:28.234536577Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.4.3","title":"Story Mode: Mobile UX (Full-Screen Swipe Cards)","description":"Build mobile story UX:\n- Full-screen cards with swipe left/right; big next/prev buttons for accessibility.\n- Each card jump selects commit and optionally scrolls to focusHeading.\n- Keep the timeline dock accessible (collapse story UI if needed).\n- Prefers-reduced-motion: disable auto transitions.","status":"open","priority":3,"issue_type":"task","created_at":"2026-02-08T00:54:18.647955578Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:28.320660937Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.4.3","depends_on_id":"bd-24q.4","type":"parent-child","created_at":"2026-02-08T00:54:18.647955578Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.4.3","depends_on_id":"bd-24q.4.1","type":"blocks","created_at":"2026-02-08T00:58:28.320620701Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.4.4","title":"Story Mode: Autoplay/Playback Integration (Pause at Milestones)","description":"Integrate story navigation with playback:\n- Story mode can autoplay through commits between milestones, then pause and present the next card.\n- Allow manual step forward/back without breaking playback state.\n- URL state includes story mode enabled + current milestone index.\n- Respect reduced-motion (no autoplay) and visibility (pause when hidden).","status":"open","priority":3,"issue_type":"task","created_at":"2026-02-08T00:54:24.684436307Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:28.587971993Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.4.4","depends_on_id":"bd-24q.4","type":"parent-child","created_at":"2026-02-08T00:54:24.684436307Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.4.4","depends_on_id":"bd-24q.4.1","type":"blocks","created_at":"2026-02-08T00:58:28.409784362Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.4.4","depends_on_id":"bd-24q.7.1","type":"blocks","created_at":"2026-02-08T00:58:28.498012144Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.4.4","depends_on_id":"bd-24q.7.2","type":"blocks","created_at":"2026-02-08T00:58:28.587930776Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.4.5","title":"Story Mode: Unit Tests (Milestones + Navigation)","description":"Unit tests:\n- Milestone schema validation and commitHash lookup.\n- Navigation: next/prev bounds, pause-at-milestone behavior, deep-linking to milestone index.\n\nDiagnostics\n- Print milestone ids and resolved commit indices for failing cases.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:54:28.974858488Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:28.674842778Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.4.5","depends_on_id":"bd-24q.4","type":"parent-child","created_at":"2026-02-08T00:54:28.974858488Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.4.5","depends_on_id":"bd-24q.4.1","type":"blocks","created_at":"2026-02-08T00:58:28.674784910Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.4.6","title":"Story Mode: E2E Tests (Cards + Autoplay + Permalink)","description":"E2E scenarios:\n- Enter story mode; verify first milestone loads commit + annotation.\n- Next/prev moves between milestones; commit selection updates; focusHeading jump works if set.\n- Autoplay between milestones works (desktop) and respects reduced-motion (no autoplay).\n- Permalink round-trip restores story mode + milestone index.\n\nDiagnostics\n- Log milestone index, commit hash, and active tab after each navigation step.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:54:34.321964447Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:28.938434843Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.4.6","depends_on_id":"bd-24q.4","type":"parent-child","created_at":"2026-02-08T00:54:34.321964447Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.4.6","depends_on_id":"bd-24q.4.2","type":"blocks","created_at":"2026-02-08T00:58:28.766665499Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.4.6","depends_on_id":"bd-24q.4.3","type":"blocks","created_at":"2026-02-08T00:58:28.853295193Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.4.6","depends_on_id":"bd-24q.4.4","type":"blocks","created_at":"2026-02-08T00:58:28.938383928Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.5","title":"Viz: Performance Pass (Worker Metrics + Caching)","description":"Goal\n- Keep the viz feeling Stripe-slick: move heavy compute into a WebWorker and add caching for snapshots + metrics, keyed by dataset hash.\n\nHeavy Work To Offload\n- Snapshot reconstruction for far jumps (patch application).\n- Levenshtein computations and any O(N) scans over diff text.\n- Search/clustering index builds and phase/outlier computations.\n\nCaching\n- In-memory (fast) + localStorage (persistent) keyed by (dataset hash, schema version).\n- Must handle schema migrations safely (clear or upgrade).\n\nAcceptance Criteria\n- Initial page load is fast; heavy compute shows progress; UI stays responsive on mobile.\n\nTesting\n- Unit tests for caching keying/migration and worker message protocol.\n- E2E: ensure worker path runs without errors; basic perf budget logging.","status":"open","priority":3,"issue_type":"task","created_at":"2026-02-08T00:25:29.070639111Z","created_by":"ubuntu","updated_at":"2026-02-08T00:54:41.891899341Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.5","depends_on_id":"bd-24q","type":"parent-child","created_at":"2026-02-08T00:25:29.070639111Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.5.1","title":"Performance: Worker Message Protocol + Compute Offload","description":"Implement a robust worker architecture:\n- Define message protocol: {op, reqId, payload, datasetHash}.\n- Offload: snapshot reconstruction, levenshtein computations, search index, clustering, phase/outlier computations.\n- Support progress messages and cancellation (abort by reqId).\n- Ensure errors propagate with stack/message and are shown nicely in UI.","status":"open","priority":3,"issue_type":"task","created_at":"2026-02-08T00:54:49.679464862Z","created_by":"ubuntu","updated_at":"2026-02-08T00:54:49.679464862Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.5.1","depends_on_id":"bd-24q.5","type":"parent-child","created_at":"2026-02-08T00:54:49.679464862Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.5.2","title":"Performance: Cache Layer (Memory + localStorage, Versioned)","description":"Implement caching for expensive results:\n- Keying: (dataset hash, cache schema version, op, params).\n- Memory cache: LRU for snapshots and computed series; avoid unbounded growth.\n- localStorage cache: persist across reloads; store compactly; provide eviction strategy.\n- Migration: if cache schema version mismatches, clear safely and log why.","status":"open","priority":3,"issue_type":"task","created_at":"2026-02-08T00:54:55.011465065Z","created_by":"ubuntu","updated_at":"2026-02-08T00:54:55.011465065Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.5.2","depends_on_id":"bd-24q.5","type":"parent-child","created_at":"2026-02-08T00:54:55.011465065Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.5.3","title":"Performance: Progress UI + Cancellation + Perf Budgets","description":"Make heavy work feel safe and controllable:\n- Show progress when worker is computing (percentage if possible, otherwise stage-based).\n- Allow canceling long operations (index build, far snapshot reconstruction).\n- Add perf budget logging (console + optional on-screen dev panel): time to load dataset, time to compute metrics, cache hit rate.","status":"open","priority":3,"issue_type":"task","created_at":"2026-02-08T00:54:59.910576653Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:29.026708981Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.5.3","depends_on_id":"bd-24q.5","type":"parent-child","created_at":"2026-02-08T00:54:59.910576653Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.5.3","depends_on_id":"bd-24q.5.1","type":"blocks","created_at":"2026-02-08T00:58:29.026674807Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.5.4","title":"Performance: Unit Tests (Cache + Worker Protocol)","description":"Unit tests:\n- Cache keying: same params -> same key; different params -> different key; schema mismatch clears.\n- LRU behavior: evicts oldest entries deterministically.\n- Worker protocol: request/response correlation by reqId; cancellation stops work; errors propagate.\n\nDiagnostics\n- Print cache keys and protocol transcripts for failing cases.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:55:05.400190812Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:29.196953044Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.5.4","depends_on_id":"bd-24q.5","type":"parent-child","created_at":"2026-02-08T00:55:05.400190812Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.5.4","depends_on_id":"bd-24q.5.1","type":"blocks","created_at":"2026-02-08T00:58:29.111907410Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.5.4","depends_on_id":"bd-24q.5.2","type":"blocks","created_at":"2026-02-08T00:58:29.196917437Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.5.5","title":"Performance: E2E Tests (Worker Path + Cache Hit Logging)","description":"E2E scenarios:\n- Load page twice; second load should show cache hits (via console logs or dev panel) for at least dataset + one computed series.\n- Trigger a heavy operation (e.g., compute lev series); ensure UI remains responsive and progress indicator updates.\n\nDiagnostics\n- Capture perf logs: load time, compute time, cache hit/miss counts.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:55:14.110208359Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:29.284126204Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.5.5","depends_on_id":"bd-24q.5","type":"parent-child","created_at":"2026-02-08T00:55:14.110208359Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.5.5","depends_on_id":"bd-24q.5.3","type":"blocks","created_at":"2026-02-08T00:58:29.284074207Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.6","title":"Viz: Dataset Tooling (Regen + Validate)","description":"Goal\n- Add safe tooling to regenerate and validate `spec_evolution_data_v1.json.gz` without repo-wide rewrites. Must work fully offline (local git history only) and never call GitHub APIs.\n\nTooling Requirements\n- Regen: append new commits/patches for `COMPREHENSIVE_SPEC_FOR_FRANKENSQLITE_V1.md` since last dataset commit; update base_commit if needed.\n- Validate: assert patch count matches commit count; assert patches apply cleanly from base_doc to each commit; assert commit metadata matches `git log`.\n- Deterministic output: same git history -> same dataset bytes (modulo gzip timestamp settings).\n\nAcceptance Criteria\n- Running regen+validate produces a dataset that the viz loads and that reproduces the same final spec snapshot as git HEAD.\n\nTesting\n- Unit tests for patch application and metadata parsing (small fixtures).\n- E2E script test: run tool against current repo and verify invariants + logs.","status":"open","priority":3,"issue_type":"task","created_at":"2026-02-08T00:25:29.144429383Z","created_by":"ubuntu","updated_at":"2026-02-08T00:55:24.854316391Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.6","depends_on_id":"bd-24q","type":"parent-child","created_at":"2026-02-08T00:25:29.144429383Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.6.1","title":"Dataset Tool: Regen (Append New Commits + Patches)","description":"Implement a safe regen tool:\n- Reads existing `spec_evolution_data_v1.json.gz` to get last included commit hash and base_commit.\n- Uses local git to find new commits that touch the spec path; extracts commit metadata and unified diff patches.\n- Appends commits+patches and rewrites gzip file deterministically.\n- Emits detailed logs (commit count, patch sizes, any skipped commits).\n\nConstraints\n- Must never shell out to destructive git commands.\n- Must never call GitHub APIs.","status":"open","priority":3,"issue_type":"task","created_at":"2026-02-08T00:55:31.242909152Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:29.369362985Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.6.1","depends_on_id":"bd-24q.6","type":"parent-child","created_at":"2026-02-08T00:55:31.242909152Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.6.1","depends_on_id":"bd-24q.6.3","type":"blocks","created_at":"2026-02-08T00:58:29.369321928Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.6.2","title":"Dataset Tool: Validate (Patches Apply Cleanly + Metadata Matches Git)","description":"Implement a validator:\n- Ensures commit_count == patch_count.\n- Applies patches from base_doc sequentially; for each step, validates patch apply success and tracks resulting snapshot hash.\n- Validates last snapshot == spec file at HEAD (or at dataset's last commit).\n- Verifies commit metadata fields (hash/short/author/date/add/del/subject) match `git show` / `git log`.\n- Produces a clear report and exits non-zero on failures.","status":"open","priority":3,"issue_type":"task","created_at":"2026-02-08T00:55:37.261967565Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:29.455957183Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.6.2","depends_on_id":"bd-24q.6","type":"parent-child","created_at":"2026-02-08T00:55:37.261967565Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.6.2","depends_on_id":"bd-24q.6.3","type":"blocks","created_at":"2026-02-08T00:58:29.455916397Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.6.3","title":"Dataset Tool: Deterministic Compression + Schema Versioning","description":"Make dataset output deterministic and evolvable:\n- Ensure gzip output is deterministic (no embedded timestamps, stable JSON ordering if applicable).\n- Add/maintain `schema_version` and a clear upgrade path (documented).\n- Add a dataset hash computation used by the viz cache keying.","status":"open","priority":3,"issue_type":"task","created_at":"2026-02-08T00:55:41.772175340Z","created_by":"ubuntu","updated_at":"2026-02-08T00:55:41.772175340Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.6.3","depends_on_id":"bd-24q.6","type":"parent-child","created_at":"2026-02-08T00:55:41.772175340Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.6.4","title":"Dataset Tool: Unit Tests (Patch Apply + Metadata Parsing)","description":"Unit tests:\n- Patch apply: small fixture series with known outputs; assert reconstruction matches.\n- Metadata parsing from git output: author/date/subject/add/del.\n- Determinism: regen twice yields same dataset hash bytes (if git history unchanged).\n\nDiagnostics\n- On failure: print fixture ids, patch excerpt, and first mismatch location.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:55:52.110944490Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:29.543606524Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.6.4","depends_on_id":"bd-24q.6","type":"parent-child","created_at":"2026-02-08T00:55:52.110944490Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.6.4","depends_on_id":"bd-24q.6.2","type":"blocks","created_at":"2026-02-08T00:58:29.543568412Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.6.5","title":"Dataset Tool: E2E Script Test (Regen + Validate on Repo)","description":"Add an end-to-end script test:\n- Runs regen (in dry-run mode first) then validate against the current repo history.\n- Verifies that the last snapshot equals the spec file at dataset last commit/HEAD.\n- Emits detailed logs: timings, commit counts, patch sizes, and any warnings.\n\nConstraints\n- Must be safe: never modifies git state; only reads history and writes dataset file when explicitly invoked.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:55:57.305509335Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:29.713777009Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.6.5","depends_on_id":"bd-24q.6","type":"parent-child","created_at":"2026-02-08T00:55:57.305509335Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.6.5","depends_on_id":"bd-24q.6.1","type":"blocks","created_at":"2026-02-08T00:58:29.630246217Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.6.5","depends_on_id":"bd-24q.6.2","type":"blocks","created_at":"2026-02-08T00:58:29.713728308Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.7","title":"Viz: Playback Mode (Play/Pause + Speed Control + Loop)","description":"Goal\n- Add a true playback mode that automatically advances commits like a video scrubber (play/pause/step), with speed control and optional loop. This should feel extremely smooth on mobile and enable passive exploration.\n\nUX (Desktop)\n- Play/pause, step back/forward, speed (0.25x..8x), loop toggle in the bottom dock.\n- While playing, charts and doc panes stay responsive; no layout jank.\n\nUX (Mobile)\n- Thumb-zone controls: big play/pause + step; speed via compact sheet slider; haptics optional (if available).\n- Autopause on heavy interactions (manual scrub, text selection, opening panels).\n\nImplementation Notes\n- Deterministic state machine (playing/paused/seeking) with requestAnimationFrame or setInterval + drift correction; use document visibility API to pause in background.\n- Respect prefers-reduced-motion: default to paused and lower update rate.\n- Persist playback state via URL state (depends on permalinks).\n\nAcceptance Criteria\n- Can play from any commit; index advances monotonically at chosen rate; pause freezes index exactly.\n- Manual scrub interrupts playback safely and predictably.\n- No console errors; no noticeable lag on mid-range mobile.\n\nTesting\n- Unit tests for scheduler drift correction + state transitions.\n- E2E (Playwright) for desktop + mobile: start play, observe commit index change, pause, scrub, resume; capture console + timing logs.","status":"open","priority":3,"issue_type":"task","created_at":"2026-02-08T00:44:40.176368373Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:25.469039449Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.7","depends_on_id":"bd-24q","type":"parent-child","created_at":"2026-02-08T00:44:40.176368373Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.7","depends_on_id":"bd-24q.3","type":"blocks","created_at":"2026-02-08T00:58:25.468996118Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.7.1","title":"Playback: Core Scheduler + State Machine","description":"Implement a deterministic playback controller:\n- State machine: paused | playing | seeking (manual scrub) with clear transitions.\n- Drift correction (don't accumulate setInterval drift); clamp index at ends; loop option.\n- Document visibility: pause when hidden; resume optionally.\n- Hooks: onTick(commitIndex) -> render; onManualScrub -> cancel playback safely.\n\nDeliverables\n- Small, testable pure functions for time->commit index mapping and transition logic (used by unit tests).","status":"open","priority":3,"issue_type":"task","created_at":"2026-02-08T00:44:49.822123722Z","created_by":"ubuntu","updated_at":"2026-02-08T00:44:49.822123722Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.7.1","depends_on_id":"bd-24q.7","type":"parent-child","created_at":"2026-02-08T00:44:49.822123722Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.7.2","title":"Playback: Dock UI + Mobile Controls","description":"Wire playback controls into the UI:\n- Bottom dock: play/pause, step, speed slider, loop toggle, and a \"playing\" indicator that doesn't feel noisy.\n- Mobile: larger tap targets + optional speed control inside the existing bottom sheet.\n- A11y: keyboard shortcuts for play/pause and step; ARIA labels; respects prefers-reduced-motion (no autoplay).\n- Interaction rules: any manual scrub immediately pauses; changing tab (diff/doc/metrics) should not break playback.","status":"open","priority":3,"issue_type":"task","created_at":"2026-02-08T00:44:56.112123012Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:25.123605078Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.7.2","depends_on_id":"bd-24q.7","type":"parent-child","created_at":"2026-02-08T00:44:56.112123012Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.7.2","depends_on_id":"bd-24q.7.1","type":"blocks","created_at":"2026-02-08T00:58:25.123563541Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.7.3","title":"Playback: Unit Tests (Scheduler + State Transitions)","description":"Add comprehensive unit tests with detailed logging for the playback controller.\n\nScope\n- State transition table coverage (paused<->playing<->seeking).\n- Drift correction: simulate wall-clock drift and assert expected index sequence.\n- Loop/clamp behavior at bounds.\n- Reduced-motion behavior: default paused; no autoplay.\n\nConstraints\n- Prefer Node built-in test runner (node:test) or the lightest possible harness (avoid adding a package manager).\n- Tests should log scenario name, seed (if any), timing parameters, and resulting index sequence for fast debugging.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:45:01.783132096Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:25.210551625Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.7.3","depends_on_id":"bd-24q.7","type":"parent-child","created_at":"2026-02-08T00:45:01.783132096Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.7.3","depends_on_id":"bd-24q.7.1","type":"blocks","created_at":"2026-02-08T00:58:25.210469672Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.7.4","title":"Playback: E2E Tests (Playwright Desktop + Mobile)","description":"Add E2E coverage for playback in a real browser (Playwright) with strong diagnostics.\n\nScenarios\n- Desktop viewport: open page, wait for dataset load, press play, assert commit index advances; pause; step; scrub; resume.\n- Mobile viewport: same scenarios; verify tap targets; ensure dock/sheet controls remain usable.\n\nLogging\n- Capture console logs + page errors; emit structured step logs with timestamps and current commit hash/idx.\n- On failure: screenshot + HTML dump + console tail.\n\nAcceptance Criteria\n- Tests pass reliably (no flaky timing). Use explicit waits tied to UI state (not arbitrary sleeps).","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:45:07.235470218Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:25.382726136Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.7.4","depends_on_id":"bd-24q.7","type":"parent-child","created_at":"2026-02-08T00:45:07.235470218Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.7.4","depends_on_id":"bd-24q.7.1","type":"blocks","created_at":"2026-02-08T00:58:25.299323594Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.7.4","depends_on_id":"bd-24q.7.2","type":"blocks","created_at":"2026-02-08T00:58:25.382685991Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.8","title":"Viz: Section-Level Diff Summary (Per-Heading Metrics)","description":"Goal\n- Provide a section-level summary of what changed for the current commit (and for A/B compares): per-heading counts for lines/tokens/lev + dominant buckets, so users can jump directly to the interesting parts.\n\nUX (Desktop)\n- New panel: a sortable table (Heading | Δlines | Δtokens | Δlev | top buckets) + tiny sparklines.\n- Clicking a row scrolls the doc pane; optional \"focus mode\" that temporarily collapses other UI to keep attention on the section.\n\nUX (Mobile)\n- Sheet-first: compact list with clear Δ badges; tapping jumps + highlights that section briefly.\n\nImplementation Notes\n- Parse rendered markdown headings into a stable outline (id anchors).\n- Map diff hunks to headings by nearest preceding heading boundary in the *rendered* doc.\n- Cache per-commit section summaries; compute incrementally to avoid O(N^2).\n\nAcceptance Criteria\n- For any commit, user can see a list of headings with meaningful \"what changed\" numbers and jump accurately.\n- Sorting and filtering are fast.\n\nTesting\n- Unit tests for heading extraction and hunk->heading mapping (synthetic docs/diffs).\n- E2E tests: click top changed section -> scrolls and highlights; works on mobile.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:45:17.443141403Z","created_by":"ubuntu","updated_at":"2026-02-08T00:45:17.443141403Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.8","depends_on_id":"bd-24q","type":"parent-child","created_at":"2026-02-08T00:45:17.443141403Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.8.1","title":"Section Summary: Heading Outline Extraction + Stable Anchors","description":"Implement a robust heading outline extractor:\n- Source of truth: rendered markdown headings (not raw markdown) so IDs match scroll targets.\n- Generate stable anchor IDs and store (heading text, level, element id, offsetTop) for the current snapshot.\n- Handle duplicate headings (disambiguate IDs deterministically).\n- Expose a query API: getOutline(commitIdx) -> outline[] used by mini-map + section summary.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:45:24.619092188Z","created_by":"ubuntu","updated_at":"2026-02-08T00:45:24.619092188Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.8.1","depends_on_id":"bd-24q.8","type":"parent-child","created_at":"2026-02-08T00:45:24.619092188Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.8.2","title":"Section Summary: Attribute Diff Hunks to Headings + Metrics","description":"Compute per-heading change metrics for each commit:\n- Parse unified diff hunks; attribute each added/removed line to the nearest preceding heading boundary in the rendered snapshot.\n- Metrics per heading: Δlines (add/del), Δtokens (approx), Δlev (from WASM), and bucket contributions (if classification exists).\n- Caching: memoize per-commit summaries keyed by dataset hash + commit idx + resolution.\n- Performance: incremental compute; avoid rebuilding entire outline each time.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:45:29.685485631Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:25.555078510Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.8.2","depends_on_id":"bd-24q.8","type":"parent-child","created_at":"2026-02-08T00:45:29.685485631Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.8.2","depends_on_id":"bd-24q.8.1","type":"blocks","created_at":"2026-02-08T00:58:25.555043544Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.8.3","title":"Section Summary: UI Panel + Jump/Highlight Interactions","description":"Build the UX for section-level summaries:\n- Desktop: sortable table + filters + tiny sparklines; click row scrolls doc to heading and briefly highlights it (non-jarring animation).\n- Mobile: bottom-sheet list with large tap targets and a \"back to list\" affordance.\n- Integrate with existing heading mini-map: shared outline + consistent highlighting.\n- Ensure interaction works in both single-commit view and A/B compare mode.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:45:34.185061895Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:25.733352101Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.8.3","depends_on_id":"bd-24q.8","type":"parent-child","created_at":"2026-02-08T00:45:34.185061895Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.8.3","depends_on_id":"bd-24q.8.1","type":"blocks","created_at":"2026-02-08T00:58:25.643345444Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.8.3","depends_on_id":"bd-24q.8.2","type":"blocks","created_at":"2026-02-08T00:58:25.733311004Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.8.4","title":"Section Summary: Unit Tests (Outline + Hunk Attribution)","description":"Unit tests with strong diagnostics:\n- Heading extraction: duplicates, weird punctuation, deep nesting, empty headings.\n- Hunk attribution: synthetic docs + diffs; assert correct section attribution and metric sums.\n- Performance sanity: ensure attribution is near-linear in diff size for typical cases.\n\nLogging\n- Each test logs input outline + diff summary and the resulting per-section metrics on failure.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:45:39.838113644Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:25.905453586Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.8.4","depends_on_id":"bd-24q.8","type":"parent-child","created_at":"2026-02-08T00:45:39.838113644Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.8.4","depends_on_id":"bd-24q.8.1","type":"blocks","created_at":"2026-02-08T00:58:25.819850781Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.8.4","depends_on_id":"bd-24q.8.2","type":"blocks","created_at":"2026-02-08T00:58:25.905418560Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.8.5","title":"Section Summary: E2E Tests (Jump to Section + Mobile Sheet)","description":"E2E coverage:\n- Desktop: open section summary, sort by Δlev, click top row -> doc scrolls to correct heading; highlight appears then fades.\n- Mobile: open sheet, tap section -> jumps; back to list works; no dock overlap.\n\nDiagnostics\n- Log selected heading id/text, scrollTop before/after, and whether highlight element is present.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:45:46.152372501Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:25.988289990Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.8.5","depends_on_id":"bd-24q.8","type":"parent-child","created_at":"2026-02-08T00:45:46.152372501Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.8.5","depends_on_id":"bd-24q.8.3","type":"blocks","created_at":"2026-02-08T00:58:25.988246939Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.9","title":"Viz: Search Across History (First-Introduced + Most-Edited)","description":"Goal\n- Add a powerful search experience across the entire spec evolution: find text/sections across commits, answer \"when was this introduced?\", and identify the most-edited sections over time.\n\nUX (Desktop)\n- Global search (Cmd/Ctrl+K): type query, see ranked results grouped by (Commit) and (Section).\n- Quick actions: jump to commit, open diff, pin as a \"reference\".\n\nUX (Mobile)\n- Search button in header; full-screen search sheet with large results and 1-tap jump.\n\nImplementation Notes\n- Build an offline-friendly index (no GitHub API): tokenization + inverted index over (commit subject, diff patch text, headings).\n- Compute/refresh in a worker; persist in localStorage keyed by dataset hash.\n- Provide query modes: exact phrase, token contains, and \"first-introduced\" (earliest commit where token appears in added lines).\n\nAcceptance Criteria\n- Query latency feels instant after index build; initial build shows progress and can be canceled.\n- Jump from a search result lands at the right commit + section and highlights the match.\n\nTesting\n- Unit tests for tokenization/index correctness (including tricky punctuation).\n- E2E tests: search on desktop/mobile, jump to result, verify highlight and correct commit selection.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:46:03.212546832Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:29.887017382Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.9","depends_on_id":"bd-24q","type":"parent-child","created_at":"2026-02-08T00:46:03.212546832Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.9","depends_on_id":"bd-24q.3","type":"blocks","created_at":"2026-02-08T00:58:29.886968Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.9","depends_on_id":"bd-24q.5","type":"blocks","created_at":"2026-02-08T00:58:29.799419749Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.9.1","title":"History Search: Build Inverted Index (Worker + localStorage)","description":"Implement the search index pipeline:\n- Tokenize: lowercased words + optional stemming-lite; keep exact phrase mode via raw substring scan.\n- Sources: commit subjects, diff patches, headings outline (optional full doc text later).\n- Index structures: token -> sorted commitIdx list (delta-compressed in storage); token -> per-commit positions optionally for highlighting.\n- Build in WebWorker; provide progress callbacks and cancellation.\n- Persist to localStorage keyed by dataset hash; migrate safely if schema changes.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:46:11.097174337Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:29.972539937Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.9.1","depends_on_id":"bd-24q.5.1","type":"blocks","created_at":"2026-02-08T00:58:29.972479214Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.9.1","depends_on_id":"bd-24q.9","type":"parent-child","created_at":"2026-02-08T00:46:11.097174337Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.9.2","title":"History Search: UX (Cmd/Ctrl+K Palette + Mobile Sheet)","description":"Build the actual search experience:\n- Desktop: Cmd/Ctrl+K opens palette; supports keyboard navigation; enter jumps; esc closes.\n- Mobile: full-screen sheet with search input pinned at top; large results; 1-tap jump.\n- Result types:\n  - Commits (subject + hash + time + top metrics)\n  - Sections/headings (heading path + earliest hit + change magnitude)\n- On jump: selects commit, scrolls to section (if available), and highlights match text.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:46:15.994844263Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:30.058972924Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.9.2","depends_on_id":"bd-24q.9","type":"parent-child","created_at":"2026-02-08T00:46:15.994844263Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.9.2","depends_on_id":"bd-24q.9.1","type":"blocks","created_at":"2026-02-08T00:58:30.058929333Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.9.3","title":"History Search: First-Introduced + Most-Edited Analytics","description":"Add the two killer query modes:\n- First-introduced: given token/phrase, find earliest commit where it appears in added lines (with surrounding context preview).\n- Most-edited: compute a per-heading \"edit mass\" over time (sum of Δtokens or Δlev) and expose top sections + their peak bursts.\n\nImplementation Notes\n- Prefer deterministic, explainable metrics (no opaque ML).\n- Cache analytics results; incremental updates when dataset extends.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:46:20.716427015Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:30.231225962Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.9.3","depends_on_id":"bd-24q.8.2","type":"blocks","created_at":"2026-02-08T00:58:30.231182821Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.9.3","depends_on_id":"bd-24q.9","type":"parent-child","created_at":"2026-02-08T00:46:20.716427015Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.9.3","depends_on_id":"bd-24q.9.1","type":"blocks","created_at":"2026-02-08T00:58:30.143892442Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.9.4","title":"History Search: Unit Tests (Tokenizer + Index + Analytics)","description":"Unit tests (with great logs):\n- Tokenizer: unicode-ish punctuation, code blocks, dashes, underscores; ensure stable tokenization.\n- Index: token -> commit list correctness; delta-compression round-trip; cancellation/resume.\n- First-introduced: synthetic diff series where token appears/disappears; ensure earliest add is returned.\n- Most-edited: synthetic per-heading sequences; ensure correct ranking and tie-breaking.\n\nDiagnostics\n- Print failing token, expected/actual commit lists, and minimal repro diff.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:46:26.731702653Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:30.405736409Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.9.4","depends_on_id":"bd-24q.9","type":"parent-child","created_at":"2026-02-08T00:46:26.731702653Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.9.4","depends_on_id":"bd-24q.9.1","type":"blocks","created_at":"2026-02-08T00:58:30.319207293Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.9.4","depends_on_id":"bd-24q.9.3","type":"blocks","created_at":"2026-02-08T00:58:30.405684542Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-24q.9.5","title":"History Search: E2E Tests (Query + Jump + Highlight)","description":"E2E scenarios:\n- Desktop: open palette, type query, arrow down/up, enter -> commit changes and match is highlighted in doc; back/forward preserves state via permalinks.\n- Mobile: open sheet, type query, tap result -> jumps; close sheet and dock still usable.\n- Analytics: select \"first introduced\" result and verify commit is not later than any other hit.\n\nDiagnostics\n- Log query, top 5 results (ids), chosen result, and final commit idx/hash.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-08T00:46:31.606232645Z","created_by":"ubuntu","updated_at":"2026-02-08T00:58:30.575972407Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["viz"],"dependencies":[{"issue_id":"bd-24q.9.5","depends_on_id":"bd-24q.3","type":"blocks","created_at":"2026-02-08T00:58:30.575920801Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.9.5","depends_on_id":"bd-24q.9","type":"parent-child","created_at":"2026-02-08T00:46:31.606232645Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-24q.9.5","depends_on_id":"bd-24q.9.2","type":"blocks","created_at":"2026-02-08T00:58:30.489412082Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-urm","title":"Spec: TxnSlot claiming_timestamp stale during CLEANING takeover","description":"In §5.6.2 cleanup_orphaned_slots, a cleaner CASes txn_id -> TXN_ID_CLEANING and then stores claiming_timestamp=now. There is a window where another cleaner can observe txn_id==TXN_ID_CLEANING while claiming_timestamp still contains a stale value from the previous owner (Phase 1 claim time), causing spurious 'stuck CLEANING' takeover. Proposed fix: after Phase 3 publish CAS succeeds (TXN_ID_CLAIMING -> real_txn_id), clear claiming_timestamp to 0 (Release). This makes a future CLEANING transition start from 0, so concurrent cleaners seed a fresh timestamp via CAS(0->now) rather than treating stale timestamps as stuck.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-02-07T22:31:48.738087677Z","created_by":"ubuntu","updated_at":"2026-02-07T23:08:12.577345995Z","closed_at":"2026-02-07T23:08:12.577325276Z","close_reason":"Completed in spec: TxnSlot Phase 3 publish clears claiming_timestamp to 0 (Release); cleanup_orphaned_slots seeds claiming_timestamp via CAS(0->now) for CLAIMING/CLEANING so stale timestamps cannot trigger spurious stuck-CLEANING takeover.","source_repo":".","compaction_level":0,"original_size":0}
